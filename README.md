# Three-Body Simulation System

A Julia-based simulation system for three-body gravitational interactions, specifically designed for Earth-Moon-Asteroid scenarios.

## Why does this exist?

Someone on MOLF (the Marillion Online Forum) posted in the
[What are you reading? topic](http://forum.marillion.com/forum/index.php?topic=7427.msg415408#msg415408)
that they had just finished Cixin Liu's _The Dark Forest_, which got me interested again something I had been chatting to
one of the AI bots about - Newtonian, Lagrangian and Hamiltonian physics (it is nice that they make you feel so clever, these
bots).  So I decided to see if they would help put together a solution to a three body problem.  Initially I was going to use _R_,
as I have some (old) familiarity with it from my masters.  However, after consulting with Github CoPilot, "we" decided on Julia
(over Python - and then had to use PyPlot anyway for the output).

Indeed, most of the code was generated by Github CoPilot (until "Limit resets on July 19, 2025.", checking which model is not
possible).  I then got some really unuseful help from Google Gemini, but it did get me moving in the right direction and,
once I had told it why it was wrong, it told me where the filename for the `gif` output goes, which is all I had asked for.
I thought.

(It was interesting to note that Gemini responded as if it had created most of the project and was familiar with the Github
CoPilot discussion, even though I am sure I did not use Gemini...)

## Overview

This project provides a robust implementation of a three-body gravitational simulation system, focusing on the interaction between Earth, Moon, and an arbitrary asteroid. The simulation uses high-precision numerical integration while maintaining energy conservation.

## Example output

| metrics | trajectory |
| :--: | :--: |
| <span id="metrics">![metrics](https://github.com/user-attachments/assets/04f7dfd7-2a88-4bfe-a5b2-c7e39a3a5eb5)</span> | <span id="trajectory">![trajectory](https://github.com/user-attachments/assets/f5dc5be8-fe2c-48a9-aa5f-5b8fca00a6a0)</span> |

![orbits](https://github.com/user-attachments/assets/aef49ced-7710-49d8-8a79-b82fa0b69ec5)


## Features

- Full 3D gravitational simulation
- High-precision ODE solver integration
- Energy conservation tracking
- Detailed visualization tools including:
  - 3D trajectory plotting
  - Energy conservation metrics
  - System evolution animations
- Clean, modular design
- AGPL-3.0 licensed

## Demo mode

The project comes with an example of how the library can be used.
You can run the script two ways and you will get
- metrics.png: Energy conservation analysis
- trajectory.png: 3D visualization of the bodies' paths
- orbits.gif: An animated GIF of the bodies' paths

Run the project from the command line:
```bash
# Clone the repository
$ git clone https://github.com/pljones/three-body-sim.git
$ cd three-body-sim

# Install system requirements (Ubuntu/Debian)
$ sudo apt-get install python3-matplotlib

# Install dependencies (only needed once - the example does this for you)
$ julia --project=. -e 'using Pkg; Pkg.instantiate()'

# Run the example simulation
$ julia --project=. examples/basic_simulation.jl
```

## Installation

If you want to go ahead and use this for further development, do feel free (subject to the AGPL).

```julia
using Pkg
Pkg.add(url="https://github.com/pljones/three-body-sim.git")
```

## Quick Start

```julia
using CelestialMechanics

# Define the bodies (Earth, Moon, Asteroid)
earth = Body(5.972e24, @SVector([0.0, 0.0, 0.0]), @SVector([0.0, 0.0, 0.0]))
moon = Body(7.34767309e22, @SVector([384400e3, 0.0, 0.0]), @SVector([0.0, 1022.0, 0.0]))
asteroid = Body(1e5, @SVector([384400e3 * 1.1, 0.0, 20000e3]), @SVector([0.0, 800.0, 0.0]))

# Create system
system = ThreeBodySystem((earth, moon, asteroid), 6.67430e-11)

# Run simulation for 30 days
solution = simulate_system(system, (0.0, 30.0 * 24 * 3600))

# Visualize results
plot_trajectory_3d(solution, system)
plot_asteroid_metrics(solution, system)
```

## Project Information

- **Created**: 2025-07-03 18:47:14 UTC
- **Author**: @pljones
- **License**: [GNU Affero General Public License v3.0](LICENSE)

## License

Copyright (C) 2025 @pljones

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
